"use strict";(()=>{Object.hasOwn||Object.defineProperty(Object,"hasOwn",{value:function(i,n){if(i==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(i),n)},configurable:!0,enumerable:!1,writable:!0});var F=()=>{};var Qe=String.fromCharCode;var K=Promise.resolve.bind(Promise),X=Promise.reject.bind(Promise),P=()=>new Promise(F);var{from:et,isArray:Z,of:tt}=Array,{isInteger:rt,MAX_VALUE:je,NEGATIVE_INFINITY:nt,POSITIVE_INFINITY:st}=Number,{assign:he,defineProperty:Ve,entries:ot,fromEntries:it,keys:Q,getPrototypeOf:Le,values:ee}=Object,me=Date.now,{iterator:qe,toStringTag:ze}=Symbol;var R=i=>i.prototype;var m=(i,n,...t)=>e=>i[n].bind(e,...t);var D=(i,n,...t)=>i[n].bind(i,...t),te=R(Array),N=R(Map),j=R(Set);var V=m(te,"pop"),O=m(te,"push");var L=m(te,"splice",0);var E=m(j,"add"),q=m(j,"clear"),C=m(j,"delete");var A=m(j,"has");var z=m(N,"clear"),w=m(N,"delete");var I=m(N,"get");var T=m(N,"set");var p=(i,n)=>(i%n+n)%n;var ke,re=class{constructor(n){Object.defineProperty(this,"length",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"front",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"back",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"count",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.items=Array(n),this.back=n-1}pushBack(...n){for(let t of n)this.count===this.length&&this.popFront(),this.items[this.back]=t,this.back=p(this.back-1,this.length),this.count++}pushFront(...n){for(let t of n)this.count===this.length&&this.popBack(),this.items[this.front]=t,this.front=p(this.front+1,this.length),this.count++}getBack(){if(this.count!==0)return this.items[p(this.back+1,this.length)]}getFront(){if(this.count!==0)return this.items[p(this.front-1,this.length)]}popBack(){if(this.count===0)return;this.back=p(this.back+1,this.length);let n=this.items[this.back];return this.items[this.back]=void 0,this.count--,n}popFront(){if(this.count===0)return;this.front=p(this.front-1,this.length);let n=this.items[this.front];return this.items[this.front]=void 0,this.count--,n}rotate(n){let{front:t,back:e,length:r,count:s,items:c}=this;if(s!==0){if(n=p(n,s),s<r)for(let d=0;d<n;d++){let u=p(e-d,r),h=p(t-d-1,r);c[u]=c[h],c[h]=void 0}this.front=p(t-n,r),this.back=p(e-n,r)}}reverse(){let n=this.count/2|0,{length:t,front:e,back:r,items:s}=this;for(let c=1;c<=n;c++){let d=p(r+c,t),u=p(e-c,t),h=s[d];s[d]=s[u],s[u]=h}}resolveIndex(n){return p(this.back+n+1,this.length)}at(n){return this.items[this.resolveIndex(n)]}replace(n,t){this.items[p(this.back+n+1,this.count)]=t}insert(n,t){this.count===this.length&&this.popFront();let e=this.resolveIndex(n);for(let r=this.front;r>e;r--)this.items[r]=this.items[r-1];this.items[e]=t,this.count++}};ke=re;var k=Symbol("a rejection by a throttled function");var ne=(i,n)=>{let t=0;return(...e)=>{let r=me();return r-t>i?(t=r,n(...e)):k}};var be=(i,n)=>i===n,ge=(i,n)=>!1,se=i=>i===!1?ge:i??be,Ge=(i,n)=>{let t=se(n),e=ne(i,t);return(r,s)=>{let c=e(r,s);return c===k?!0:c}},Te=i=>{let n=i.length**.5;return i.reduce((t,e)=>t+e*(e+n),0)};var Se=0?(i,n,t)=>{let e=i(n),r=t?i(t):{name:"untracked"};console.log("GET:	",e.name,"	by OBSERVER:	",r.name,"	with VALUE	",e.value)}:F;var S=i=>{let{newId:n,getId:t,setId:e,addEdge:r}=i;return class{constructor(c,{name:d,equals:u}={}){let h=n();e(h,this),this.id=h,this.rid=h,this.name=d,this.value=c,this.equals=se(u)}get(c){return c&&r(this.id,c),0&&Se(t,this.id,c),this.value}set(c){let d=this.value;return!this.equals(d,this.value=typeof c=="function"?c(d):c)}run(c){return c?1:0}bindMethod(c){return D(this,c)}static create(...c){let d=new this(...c);return[d.id,d]}}},Be=i=>{let n=i.runId;return class extends i.getClass(S){constructor(e,r){super(e,r)}set(e){return super.set(e)?(n(this.id),!0):!1}static create(e,r){let s=new this(e,r);return[s.id,s.bindMethod("get"),s.bindMethod("set")]}}},He=i=>class extends i.getClass(S){constructor(t,e){super(e?.value,e),this.fn=t,e?.defer===!1&&this.get()}get(t){return this.rid&&(this.run(),this.rid=0),super.get(t)}run(t){return super.set(this.fn(this.rid))?1:0}static create(t,e){let r=new this(t,e);return[r.id,r.bindMethod("get")]}},$e=i=>class extends i.getClass(S){constructor(t,e){super(e?.value,e),this.fn=t,this.dirty=1,e?.defer===!1&&this.get()}run(t){return this.dirty=1}get(t){return(this.rid||this.dirty)&&(super.set(this.fn(this.rid)),this.dirty=0,this.rid=0),super.get(t)}static create(t,e){let r=new this(t,e);return[r.id,r.bindMethod("get")]}},We=i=>{let n=i.runId;return class extends i.getClass(S){constructor(e,r){super(void 0,r),this.fn=e,r?.defer===!1&&this.set()}get(e){e&&(this.rid&&this.run(),super.get(e))}set(){return n(this.id)}run(e){let r=this.fn(this.rid)!==!1;return this.rid&&(this.rid=0),r?1:0}static create(e,r){let s=new this(e,r);return[s.id,s.bindMethod("get"),s.bindMethod("set")]}}};var Ye=i=>{let n=i.runId;return class extends i.getClass(S){promise;constructor(e,r){super(e,r)}setPromise(e,r=!1){let s=this;return e=typeof e=="function"&&!(e instanceof Promise)?e(s.value):e,e instanceof Promise?(s.promise=e).then(u=>s.promise===e?(s.promise=void 0,s.setPromise(u,r)):P(),u=>(s.promise===e&&(s.promise=void 0),r?X(u):P())):(super.set(e)&&n(this.id),K(e))}run(e){return this.promise?-1:super.run(e)}static create(e,r){let s=new this(e,r);return[s.id,s.bindMethod("get"),s.bindMethod("setPromise")]}}};var ie=class{addEdge;delEdge;newId;getId;setId;delId;runId;swapId;clearCache;addClass;getClass;batch;dynamic;constructor(){let n=0,t=0,e=new Map,r=new Map,s=I(e),c=I(r),d=T(e),u=T(r),h=w(e),G=w(r),x=new Map,v=I(x),M=T(x),y=z(x),B=o=>{let a=new Set,l=E(a),_=A(a),f=g=>{_(g)||(s(g)?.forEach(f),l(g))};return o.forEach(f),o.forEach(C(a)),[...a,...o].reverse()},ce=(...o)=>{let a=Te(o);return v(a)??(M(a,B(o))&&v(a))},H=new Map,b=I(H),$=T(H),xe=w(H),U=new Set,le=E(U),Ie=C(U),ve=q(U),W=new Set,De=E(W),Ee=A(W),Ce=q(W),Y=new Map,Ae=T(Y),we=z(Y),J=[],Re=O(J),Oe=V(J),de=(...o)=>{ve(),Ce(),0,o.forEach(le);let a=o.length,l=ce(...o);for(let f of l){if(Ie(f)&&!Ee(f)){let g=Me(f,a-- >0);g!==0&&s(f)?.forEach(g>=1?le:De),0&&Ae(f,g)}if(U.size<=0)break}0&&console.log("topological visiting ordering: ",[...Y].map(([f,g])=>[b(f).name,g])),0&&console.log("UPDATE_POSTRUNS:	",J);let _;for(;_=Oe();)b(_)?.postrun()},Me=(o,a)=>{let l=a===!0,_=b(o),f=_?.run(l)??0;return f>=1&&_.postrun&&Re(o),f},ue=[],Ue=O(ue),Fe=L(ue),_e=()=>++t,pe=()=>{--t<=0&&(t=0,de(...Fe()))},Ke=(o,...a)=>{_e();let l=o(...a);return pe(),l};this.addEdge=(o,a)=>{if(o+a<=0)return!1;let l=s(o)??(d(o,new Set)&&s(o));return l.has(a)?!1:(l.add(a),c(a)?.add(o)||u(a,new Set([o])),y(),!0)},this.delEdge=(o,a)=>s(o)?.delete(a)&&c(a)?.delete(o)?(y(),!0):!1,this.newId=()=>(y(),++n),this.getId=b,this.setId=$,this.delId=o=>{if(xe(o)){let a=s(o),l=c(o);return a?.forEach(_=>{c(_)?.delete(o)}),l?.forEach(_=>{s(_)?.delete(o)}),a?.clear(),l?.clear(),h(o),G(o),y(),!0}return!1},this.swapId=(o,a)=>{let l=b(o),_=b(a);$(o,_),$(a,l),l&&(l.id=a,l.rid&&(l.rid=a)),_&&(_.id=o,_.rid&&(_.rid=o)),y()},this.clearCache=y,this.runId=o=>t<=0?(de(o),!0):(Ue(o),!1);let fe=new Map,Pe=I(fe),Ne=T(fe);this.addClass=o=>{let a=this.getClass(o);return D(a,"create")},this.getClass=o=>{let a=Pe(o);return a||(a=o(this),Ne(o,a),a)},this.batch={startBatching:_e,endBatching:pe,scopedBatching:Ke},this.dynamic={setValue:(o,a)=>{let l=b(o??0);l&&(l.value=a)},setEquals:(o,a)=>{let l=b(o??0);l&&(l.equals=a)},setFn:(o,a)=>{let l=b(o??0);l&&(l.fn=a)}}}};var ae=i=>class extends i.getClass(S){constructor(t={},e){let r=Z(t),s=r?[]:{},c=r?[...t.keys()]:Q(t),d=r?[...t.values()]:ee(t);super([s],e),this.setItems(c,d,!1)}postrun(){this.value.splice(1)}set(t,e,r){return this.setItems([t],[e],r)}setItems(t,e,r){let s=this.equals,c=this.value,d=c.length,u=c[0],h=t.length;for(let x=0;x<h;x++){let v=t[x],M=u[v],y=e[x],B=u[v]=typeof y=="function"?y(M):y;!s(M,B)&&c.push(v)}let G=c.length;return!r&&G-d>0}delete(t,e){return this.deleteKeys([t],e)}deleteKeys(t,e){let r=this.value,s=r.length,c=r[0];for(let u of t)u in c&&(delete c[u],r.push(u));let d=r.length;return!e&&d-s>0}},Je=i=>{let n=i.runId;return class extends i.getClass(ae){setItems(e,r,s){return super.setItems(e,r,s)?n(this.id):!1}deleteKeys(e,r){return super.deleteKeys(e,r)?n(this.id):!1}static create(e={},r){let s=new this(e,r);return[s.id,s.bindMethod("get"),s.bindMethod("set"),s.bindMethod("setItems"),s.bindMethod("delete"),s.bindMethod("deleteKeys")]}}},Xe=i=>class extends i.getClass(ae){constructor(t,e){super(e?.value,e),this.fn=t,e?.defer===!1&&this.get()}get(t){return this.rid&&(this.run(),this.rid=0),super.get(t)}run(t){let[e,r,s=!0]=this.fn(this.rid);return s&&super.setItems(e,r)?1:0}static create(t,e){let r=new this(t,e);return[r.id,r.bindMethod("get")]}};})();
