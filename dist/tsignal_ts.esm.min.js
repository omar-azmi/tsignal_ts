Object.hasOwn||Object.defineProperty(Object,"hasOwn",{value:function(o,n){if(o==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(o),n)},configurable:!0,enumerable:!1,writable:!0});var U=()=>{};var Be=String.fromCharCode;var O=Promise.resolve.bind(Promise),W=Promise.reject.bind(Promise),K=()=>new Promise(U);var{from:$e,isArray:Y,of:We}=Array,{isInteger:Ye,MAX_VALUE:Me,NEGATIVE_INFINITY:Je,POSITIVE_INFINITY:Xe}=Number,{assign:_e,defineProperty:Ue,keys:J,getPrototypeOf:Oe,values:X}=Object,pe=Date.now,{iterator:Ke,toStringTag:Fe}=Symbol;var E=o=>o.prototype;var m=(o,n,...t)=>e=>o[n].bind(e,...t);var I=(o,n,...t)=>o[n].bind(o,...t),Q=E(Array),Z=E(Map),F=E(Set);var N=m(Q,"pop"),C=m(Q,"push");var P=m(Q,"splice",0);var A=m(F,"add"),ee=m(F,"clear"),L=m(F,"delete");var V=m(F,"has");var j=m(Z,"clear");var h=m(Z,"get");var y=m(Z,"set");var _=(o,n)=>(o%n+n)%n;var Ne,te=class{constructor(n){Object.defineProperty(this,"length",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"front",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"back",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"count",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.items=Array(n),this.back=n-1}pushBack(...n){for(let t of n)this.count===this.length&&this.popFront(),this.items[this.back]=t,this.back=_(this.back-1,this.length),this.count++}pushFront(...n){for(let t of n)this.count===this.length&&this.popBack(),this.items[this.front]=t,this.front=_(this.front+1,this.length),this.count++}getBack(){if(this.count!==0)return this.items[_(this.back+1,this.length)]}getFront(){if(this.count!==0)return this.items[_(this.front-1,this.length)]}popBack(){if(this.count===0)return;this.back=_(this.back+1,this.length);let n=this.items[this.back];return this.items[this.back]=void 0,this.count--,n}popFront(){if(this.count===0)return;this.front=_(this.front-1,this.length);let n=this.items[this.front];return this.items[this.front]=void 0,this.count--,n}rotate(n){let{front:t,back:e,length:r,count:s,items:i}=this;if(s!==0){if(n=_(n,s),s<r)for(let l=0;l<n;l++){let d=_(e-l,r),p=_(t-l-1,r);i[d]=i[p],i[p]=void 0}this.front=_(t-n,r),this.back=_(e-n,r)}}reverse(){let n=this.count/2|0,{length:t,front:e,back:r,items:s}=this;for(let i=1;i<=n;i++){let l=_(r+i,t),d=_(e-i,t),p=s[l];s[l]=s[d],s[d]=p}}resolveIndex(n){return _(this.back+n+1,this.length)}at(n){return this.items[this.resolveIndex(n)]}replace(n,t){this.items[_(this.back+n+1,this.count)]=t}insert(n,t){this.count===this.length&&this.popFront();let e=this.resolveIndex(n);for(let r=this.front;r>e;r--)this.items[r]=this.items[r-1];this.items[e]=t,this.count++}};Ne=te;var z=Symbol("a rejection by a throttled function");var re=(o,n)=>{let t=0;return(...e)=>{let r=pe();return r-t>o?(t=r,n(...e)):z}};var k=(o,n)=>o===n,q=(o,n)=>!1,Pe=(o,n)=>{let t=n===!1?q:n??k,e=re(o,t);return(r,s)=>{let i=e(r,s);return i===z?!0:i}},me=o=>{let n=o.length**.5;return o.reduce((t,e)=>t+e*(e+n),0)},he=0?(o,n,t)=>{let e=o(n),r=t?o(t):{name:"untracked"};console.log("GET:	",e.name,"	by OBSERVER:	",r.name,"	with VALUE	",e.value)}:U;var b=o=>{let{newId:n,getId:t,setId:e,addEdge:r}=o;return class{constructor(i,{name:l,equals:d}={}){let p=n();e(p,this),this.id=p,this.rid=p,this.name=l,this.value=i,this.equals=d===!1?q:d??k}get(i){return i&&r(this.id,i),0&&he(t,this.id,i),this.value}set(i){let l=this.value;return!this.equals(l,this.value=typeof i=="function"?i(l):i)}run(i){return i?1:0}bindMethod(i){return I(this,i)}static create(...i){let l=new this(...i);return[l.id,l]}}},Le=o=>{let n=o.runId;return class extends o.getClass(b){constructor(e,r){super(e,r)}set(e){return super.set(e)?(n(this.id),!0):!1}static create(e,r){let s=new this(e,r);return[s.id,s.bindMethod("get"),s.bindMethod("set")]}}},Ve=o=>class extends o.getClass(b){constructor(t,e){super(e?.value,e),this.fn=t,e?.defer===!1&&this.get()}get(t){return this.rid&&(this.run(),this.rid=0),super.get(t)}run(t){return super.set(this.fn(this.rid))?1:0}static create(t,e){let r=new this(t,e);return[r.id,r.bindMethod("get")]}},je=o=>class extends o.getClass(b){constructor(t,e){super(e?.value,e),this.fn=t,this.dirty=1,e?.defer===!1&&this.get()}run(t){return this.dirty=1}get(t){return(this.rid||this.dirty)&&(super.set(this.fn(this.rid)),this.dirty=1,this.rid=0),super.get(t)}static create(t,e){let r=new this(t,e);return[r.id,r.bindMethod("get")]}},ze=o=>{let n=o.runId;return class extends o.getClass(b){constructor(e,r){super(void 0,r),this.fn=e,r?.defer===!1&&this.set()}get(e){e&&(this.run(),super.get(e))}set(){return n(this.id)}run(e){let r=this.fn(this.rid)!==!1;return this.rid&&(this.rid=0),r?1:0}static create(e,r){let s=new this(e,r);return[s.id,s.bindMethod("get"),s.bindMethod("set")]}}};var ke=o=>{let n=o.runId;return class extends o.getClass(b){promise;constructor(e,r){super(e,r)}setPromise(e,r=!1){let s=this;return e=typeof e=="function"&&!(e instanceof Promise)?e(s.value):e,e instanceof Promise?(s.promise=e).then(d=>s.promise===e?(s.promise=void 0,s.setPromise(d,r)):K(),d=>(s.promise===e&&(s.promise=void 0),r?W(d):K())):(super.set(e)&&n(this.id),O(e))}run(e){return this.promise?-1:super.run(e)}static create(e,r){let s=new this(e,r);return[s.id,s.bindMethod("get"),s.bindMethod("setPromise")]}}};var se=class{addEdge;delEdge;newId;getId;setId;delId;runId;addClass;getClass;batch;dynamic;constructor(){let n=0,t=0,e=new Map,r=new Map,s=h(e),i=h(r),l=y(e),d=y(r),p=new Map,w=h(p),S=y(p),D=j(p),R=a=>{let c=new Set,u=A(c),T=V(c),x=f=>{T(f)||(u(f),s(f)?.forEach(x))};return a.forEach(x),c},v=(...a)=>{let c=me(a);return w(c)??(S(c,R(a))&&w(c))},M=new Map,g=h(M),ye=y(M),G=new Set,be=A(G),ge=L(G),Se=ee(G),H=new Map,Te=h(H),xe=y(H),Ie=j(H),B=[],De=C(B),ve=N(B),ie=[],Ee=C(ie),Ce=P(ie),ae=(...a)=>{Se(),Ie(),v(...a).forEach(be);for(let u of a)$(u,!0);0&&console.log("UPDATE_POSTRUNS:	",B);let c;for(;c=ve();)g(c)?.postrun()},ce=()=>++t,le=()=>{--t<=0&&(t=0,ae(...Ce()))},Ae=(a,...c)=>{ce();let u=a(...c);return le(),u},$=(a,c)=>{if(ge(a)){let u=c===!0,T=g(a);0&&console.log("UPDATE_CYCLE	","visiting   :	",T?.name);let x=u?1:0;if(x<=0)for(let ue of i(a)??[])$(ue),x|=Te(ue)??0;let f=x;f>=1&&(f=T?.run(u)??0),xe(a,f),0&&console.log("UPDATE_CYCLE	",f>0?"propagating:	":f<0?"delaying    	":"blocking   :	",T?.name),f>=1&&(T.postrun&&De(a),s(a)?.forEach($))}};this.addEdge=(a,c)=>{let u=s(a)??(l(a,new Set)&&s(a));u.has(c)||(u.add(c),i(c)?.add(a)||d(c,new Set([a])))},this.delEdge=void 0,this.newId=()=>(D(),++n),this.getId=g,this.setId=ye,this.delId=void 0,this.runId=a=>t<=0?(ae(a),!0):(Ee(a),!1);let de=new Map,we=h(de),Re=y(de);this.addClass=a=>{let c=this.getClass(a);return I(c,"create")},this.getClass=a=>{let c=we(a);return c||(c=a(this),Re(a,c),c)},this.batch={startBatching:ce,endBatching:le,scopedBatching:Ae},this.dynamic={setValue:(a,c)=>{let u=g(a??0);u&&(u.value=c)},setEquals:(a,c)=>{let u=g(a??0);u&&(u.equals=c)},setFn:(a,c)=>{let u=g(a??0);u&&(u.fn=c)}}}};var oe=o=>class extends o.getClass(b){constructor(t={},e){let r=Y(t),s=r?[]:{},i=r?[...t.keys()]:J(t),l=r?[...t.values()]:X(t);super([s],e),this.setItems(i,l,!1)}postrun(){this.value.splice(1)}set(t,e,r){return this.setItems([t],[e],r)}setItems(t,e,r){let s=this.equals,i=this.value,l=i.length,d=i[0],p=t.length;for(let S=0;S<p;S++){let D=t[S],R=d[D],v=e[S],M=d[D]=typeof v=="function"?v(R):v;!s(R,M)&&i.push(D)}let w=i.length;return!r&&w-l>0}delete(t,e){return this.deleteKeys([t],e)}deleteKeys(t,e){let r=this.value,s=r.length,i=r[0];for(let d of t)d in i&&(delete i[d],r.push(d));let l=r.length;return!e&&l-s>0}},qe=o=>{let n=o.runId;return class extends o.getClass(oe){setItems(e,r,s){return super.setItems(e,r,s)?n(this.id):!1}deleteKeys(e,r){return super.deleteKeys(e,r)?n(this.id):!1}static create(e={},r){let s=new this(e,r);return[s.id,s.bindMethod("get"),s.bindMethod("set"),s.bindMethod("setItems"),s.bindMethod("delete"),s.bindMethod("deleteKeys")]}}},Ge=o=>class extends o.getClass(oe){constructor(t,e){super(e?.value,e),this.fn=t,e?.defer===!1&&this.get()}get(t){return this.rid&&(this.run(),this.rid=0),super.get(t)}run(t){let[e,r,s=!0]=this.fn(this.rid);return s&&super.setItems(e,r)?1:0}static create(t,e){let r=new this(t,e);return[r.id,r.bindMethod("get")]}};export{ke as AsyncStateSignal_Factory,se as Context,ze as EffectSignal_Factory,je as LazySignal_Factory,Ve as MemoSignal_Factory,Ge as RecordMemoSignal_Factory,oe as RecordSignal_Factory,qe as RecordStateSignal_Factory,b as SimpleSignal_Factory,Le as StateSignal_Factory,k as default_equality,q as falsey_equality,Pe as throttlingEquals};
